{
  "info": {
    "name": "NeuraChat API",
    "description": "Complete API collection for NeuraChat backend with Socket.IO-based messaging.\n\nüöÄ Features:\n- Cookie-based JWT authentication\n- Real-time messaging via Socket.IO (send messages)\n- REST API for message history, edits, deletes\n- Database persistence for all messages\n\nüìù Setup:\n1. Import this collection into Postman\n2. Set baseUrl variable to http://localhost:5000\n3. Register a user\n4. Login (automatically stores cookie)\n5. All subsequent requests use the cookie automatically\n\nÔøΩ Sending Messages:\nMessages are sent ONLY via Socket.IO:\n1. Create new WebSocket request in Postman\n2. Connect to: ws://localhost:5000\n3. Emit: socket.emit('send-message', { chat_id, sender_id, content, type })\n4. Listen for: 'new-message' event\n\nüì• Fetching/Editing Messages:\nUse REST API endpoints in this collection.\n\nNote: Call/AI/Notification features are not yet implemented (501 status).",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:5000",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string"
    },
    {
      "key": "chatId",
      "value": "",
      "type": "string"
    },
    {
      "key": "messageId",
      "value": "",
      "type": "string"
    },
    {
      "key": "notificationId",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "description": "User registration, login, and authentication using cookie-based JWT tokens.\n\nüç™ Cookie-Based Auth:\n- JWT token stored in httpOnly cookie (secure, prevents XSS)\n- Automatically included in all requests\n- No need to manually set Authorization headers\n\nüîê Security:\n- Passwords hashed with bcrypt\n- Supabase Auth handles authentication\n- Database trigger auto-creates user profile\n\nüìù Usage:\n1. Register new user\n2. Login (cookie set automatically)\n3. All subsequent requests authenticated via cookie",
      "item": [
        {
          "name": "Register",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"testuser1\",\n  \"email\": \"testuser1@example.com\",\n  \"password\": \"SecurePass123!\",\n  \"full_name\": \"Test User One\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "register"]
            },
            "description": "Register a new user account.\n\n‚úÖ Creates Supabase Auth user\n‚úÖ Database trigger auto-creates profile\n‚úÖ Sets JWT cookie automatically\n‚úÖ Returns user data\n\nNote: Email confirmation is disabled for testing."
          }
        },
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"testuser1@example.com\",\n  \"password\": \"SecurePass123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "login"]
            }
          }
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/auth/me",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "me"]
            }
          }
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/auth/logout",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "logout"]
            }
          }
        }
      ]
    },
    {
      "name": "Users",
      "item": [
        {
          "name": "Get User Profile",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "{{userId}}"]
            }
          }
        },
        {
          "name": "Update Profile",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"full_name\": \"Test User Updated\",\n  \"status_message\": \"Hey there! I'm using NeuraChat\",\n  \"avatar_url\": \"https://example.com/avatar.jpg\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/users/profile",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "profile"]
            }
          }
        },
        {
          "name": "Search Users",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users/search?query=test",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "search"],
              "query": [
                {
                  "key": "query",
                  "value": "test"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Chats",
      "item": [
        {
          "name": "Create Private Chat",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"private\",\n  \"participants\": [\"user-id-1\", \"user-id-2\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/chats",
              "host": ["{{baseUrl}}"],
              "path": ["api", "chats"]
            }
          }
        },
        {
          "name": "Create Group Chat",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"group\",\n  \"name\": \"My Group Chat\",\n  \"participants\": [\"user-id-1\", \"user-id-2\", \"user-id-3\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/chats",
              "host": ["{{baseUrl}}"],
              "path": ["api", "chats"]
            }
          }
        },
        {
          "name": "Get All Chats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/chats",
              "host": ["{{baseUrl}}"],
              "path": ["api", "chats"]
            }
          }
        },
        {
          "name": "Get Chat Details",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/chats/{{chatId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "chats", "{{chatId}}"]
            }
          }
        },
        {
          "name": "Update Group Chat",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Group Name\",\n  \"avatar_url\": \"https://example.com/group-avatar.jpg\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/chats/{{chatId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "chats", "{{chatId}}"]
            }
          }
        },
        {
          "name": "Add Participant",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"user-id-to-add\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/chats/{{chatId}}/participants",
              "host": ["{{baseUrl}}"],
              "path": ["api", "chats", "{{chatId}}", "participants"]
            }
          }
        },
        {
          "name": "Remove Participant",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/chats/{{chatId}}/participants/user-id-to-remove",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "chats",
                "{{chatId}}",
                "participants",
                "user-id-to-remove"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Messages",
      "description": "Retrieve, edit, and delete messages. Messages are SENT via Socket.IO only.\n\nüí° Architecture:\n- Socket.IO: Send new messages (saves to DB + broadcasts)\n- REST API: Fetch history, edit, delete messages\n\nüì® Send Message (Socket.IO Only):\n```javascript\nsocket.emit('send-message', {\n  chat_id: 'chat-123',\n  sender_id: 'user-456',\n  content: 'Hello!',\n  type: 'text'\n});\n// ‚Üí Authenticates sender\n// ‚Üí Saves to Supabase database\n// ‚Üí Broadcasts to all chat participants\n```\n\nüì• Fetch Messages (REST):\nGET /api/messages/:chatId - Retrieve message history\n\n‚úèÔ∏è Edit/Delete (REST):\nPUT/DELETE - Also broadcast real-time updates via Socket.IO",
      "item": [
        {
          "name": "Get Chat Messages",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/messages/{{chatId}}?limit=50&offset=0",
              "host": ["{{baseUrl}}"],
              "path": ["api", "messages", "{{chatId}}"],
              "query": [
                {
                  "key": "limit",
                  "value": "50",
                  "description": "Number of messages to retrieve (max 100)"
                },
                {
                  "key": "offset",
                  "value": "0",
                  "description": "Pagination offset (for infinite scroll)"
                }
              ]
            },
            "description": "Retrieve message history for a chat.\n\nReturns messages in reverse chronological order (newest first) with:\n- Full message details\n- Sender information (username, avatar, etc.)\n- Pagination support\n\nUse this on initial chat load or when fetching older messages."
          }
        },
        {
          "name": "Update Message",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"content\": \"Updated message content\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/messages/{{messageId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "messages", "{{messageId}}"]
            },
            "description": "Edit a message you sent.\n\n‚úÖ Updates database\n‚úÖ Emits 'message-updated' event via Socket.IO\n‚úÖ All users see the edit in real-time\n\nRestrictions:\n- Only message sender can edit\n- Can only edit text content"
          }
        },
        {
          "name": "Delete Message",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/messages/{{messageId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "messages", "{{messageId}}"]
            },
            "description": "Delete a message you sent.\n\n‚úÖ Removes from database\n‚úÖ Emits 'message-deleted' event via Socket.IO\n‚úÖ All users see the deletion in real-time\n\nRestrictions:\n- Only message sender can delete\n- Also deletes associated media files"
          }
        },
        {
          "name": "React to Message",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"emoji\": \"üëç\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/messages/{{messageId}}/reactions",
              "host": ["{{baseUrl}}"],
              "path": ["api", "messages", "{{messageId}}", "reactions"]
            },
            "description": "Add an emoji reaction to a message.\n\nNote: Reaction functionality may need to be implemented in the backend."
          }
        }
      ]
    },
    {
      "name": "Calls (Not Implemented)",
      "item": [
        {
          "name": "Initiate Call",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"chatId\": \"chat-id\",\n  \"type\": \"video\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/calls",
              "host": ["{{baseUrl}}"],
              "path": ["api", "calls"]
            }
          }
        }
      ]
    },
    {
      "name": "AI Features",
      "description": "AI-powered text enhancement and chat agent endpoints.\n\nü§ñ Architecture:\n- **Adapter Pattern**: Supports Gemini, Ollama, and HuggingFace interchangeably.\n- **Model Override**: All POST requests accept an optional `model` parameter to switch models dynamically (e.g., use 'gemini-pro' for complex tasks, 'llama2' for speed).\n\nüîë Authentication:\n- All routes require a valid login cookie.\n\nüìù Common Body Parameters:\n- `text`: The input text to process.\n- `model`: (Optional) Specific model name (e.g., 'gemini-1.5-flash').",
      "item": [
        {
          "name": "Get Available Models",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/ai/models",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "models"]
            },
            "description": "Returns a list of available AI models based on the active provider (e.g., ['gemini-pro', 'gemini-1.5-flash'] or local Ollama models)."
          }
        },
        {
          "name": "Correct Grammar",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"Me want go to the store yesterday.\",\n  \"model\": \"gemini-pro\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/grammar",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "grammar"]
            },
            "description": "Corrects grammar and spelling errors."
          }
        },
        {
          "name": "Summarize Message",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"NeuraChat is a comprehensive messaging platform that combines real-time communication with advanced AI capabilities. It uses WebSockets for instant messaging and integrates with various AI providers like Google Gemini and Ollama to offer features such as grammar correction, text summarization, and tone adjustment. The team is currently working on adding WebRTC video calls.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/summarize",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "summarize"]
            },
            "description": "Condenses long text into a single, clear sentence."
          }
        },
        {
          "name": "Enhance Clarity",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"hey i think maybe we should prolly delay the meetin cuz im busy\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/enhance",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "enhance"]
            },
            "description": "Rewrites text to be professional, clear, and concise without changing the meaning."
          }
        },
        {
          "name": "Expand (Drafting)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"Project delayed. Supply chain issues.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/expand",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "expand"]
            },
            "description": "Expands short notes into a full, polite paragraph."
          }
        },
        {
          "name": "Change Tone",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"You missed the deadline. Fix it immediately.\",\n  \"tone\": \"empathetic\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/tone",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "tone"]
            },
            "description": "Rewrites text in a specific tone.\n\nAllowed Tones:\n- `casual`\n- `formal`\n- `empathetic`"
          }
        },
        {
          "name": "Translate",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"Hello, welcome to our application.\",\n  \"targetLang\": \"Spanish\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/translate",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "translate"]
            },
            "description": "Translates text to the target language while preserving the original nuance."
          }
        },
        {
          "name": "Update AI Preferences",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"provider\": \"gemini\",\n  \"model\": \"gemini-1.5-flash\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/preferences",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "preferences"]
            },
            "description": "Sets the user's preferred AI provider. All subsequent AI requests will use this provider unless overridden in the request body."
          }
        },
        {
          "name": "Get Main Session ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/ai/session",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "session"]
            },
            "description": "Retrieves the user's persistent 'General Assistant' session. If it doesn't exist, it creates one automatically. \n\nUse the returned `session.id` for the `/chat` endpoint."
          }
        },
        {
          "name": "Get Main Session History",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/ai/session/history",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "session", "history"]
            },
            "description": "Returns the chat hisory of the user with ai agent"
          }
        },
        {
          "name": "Chat with AI Agent",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"sessionId\": \"chat-session-123\", \n  \"query\": \"Can you help me draft an email about the project delay?\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/chat",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "chat"]
            },
            "description": "Agentic Chat Endpoint.\n\n**Logic**: Uses LangChain `AgentService`.\n**Memory**: Automatically loads conversation history from Supabase based on `sessionId`.\n**Tools**: Capable of using defined tools (e.g., getting current time, database lookups).\n\nReturns the agent's response and saves the interaction to the database."
          }
        }
      ]
    },
    {
      "name": "Notifications",
      "description": "Real-time notification system for messages, calls, and system events.\n\nüîî Features:\n- Push notifications via Socket.IO\n- Persistent storage in database\n- Mark as read (single/all)\n- Pagination support\n\nüì° Real-Time:\nListen for 'notification:new' event on Socket.IO:\n```javascript\nsocket.on('notification:new', (notification) => {\n  console.log('New notification:', notification);\n});\n```\n\nüîê Authentication:\nAll routes require valid login cookie.",
      "item": [
        {
          "name": "Get Notifications",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/notifications?page=1",
              "host": ["{{baseUrl}}"],
              "path": ["api", "notifications"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number for pagination (50 notifications per page)"
                }
              ]
            },
            "description": "Retrieve the last 50 notifications for the authenticated user.\n\n‚úÖ Ordered by created_at descending (newest first)\n‚úÖ Includes read/unread status\n‚úÖ Pagination support\n\nResponse:\n```json\n{\n  \"notifications\": [...],\n  \"total\": 150\n}\n```"
          }
        },
        {
          "name": "Mark Notification as Read",
          "request": {
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/notifications/{{notificationId}}/read",
              "host": ["{{baseUrl}}"],
              "path": ["api", "notifications", "{{notificationId}}", "read"]
            },
            "description": "Mark a specific notification as read.\n\n‚úÖ Updates is_read to true\n‚úÖ Returns updated notification\n\nRestrictions:\n- Only the notification owner can mark it as read"
          }
        },
        {
          "name": "Mark All Notifications as Read",
          "request": {
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/notifications/read-all",
              "host": ["{{baseUrl}}"],
              "path": ["api", "notifications", "read-all"]
            },
            "description": "Mark all unread notifications as read for the authenticated user.\n\n‚úÖ Bulk update operation\n‚úÖ Returns success message\n\nResponse:\n```json\n{\n  \"message\": \"All notifications marked as read\"\n}\n```"
          }
        }
      ]
    }
  ]
}
